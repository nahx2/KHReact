<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>market</title>
  </head>
  <body>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <div id="root"></div>

    <style>
      span {
        margin-left: 10px;
        margin-right: 10px;
      }

      button {
        margin: 10px;
      }

      .list {
        border-bottom: 1px solid grey;
      }

      .modal {
        margin: 10px;
        padding: 10px;
        background: #eee;
      }
    </style>

    <script type="text/babel">
      const root = document.getElementById("root");
      const App = () => {
        let [like, setLike] = React.useState([0, 0, 0]);
        let [dislike, setDislike] = React.useState([0, 0, 0]);
        let [modal, setModal] = React.useState(false);
        let [userInput, setUserInput] = React.useState("");
        const [index, setIndex] = React.useState(0);

        const [books, setBooks] = React.useState([
          "ìë°”ì˜ ì •ì„",
          "ë¦¬ì•¡íŠ¸ì˜ ì •ì„",
          "ì˜¤ë¼í´ì˜ ì •ì„",
        ]);

        const [publishs, setPublishs] = React.useState([
          "5ì›” 11ì¼ ì¶œíŒ",
          "6ì›” 12ì¼ ì¶œíŒ",
          "7ì›” 13ì¼ ì¶œíŒ",
        ]);

        const add = (i) => {
          setLike(like + 1);
        };

        const minus = () => {
          setDislike(dislike + 1);
        };
        // ìˆ˜ì •í•˜ê¸° - ë°°ì—´.. ì–•ì€ ë³µì‚¬
        // ë¦¬ì•¡íŠ¸ì˜ ì •ì„ -> ìŠ¤í”„ë§ì˜ ì •ì„
        // function bookUpdate() {
        //   let book_copy = [...books];
        //   book_copy[1] = "ìŠ¤í”„ë§ì˜ ì •ì„";
        //   setBooks(book_copy);
        // }
        const bookUpdate = () => {
          let book_copy = [...books];
          book_copy[1] = "ìŠ¤í”„ë§ì˜ ì •ì„";
          setBooks(book_copy);
        };

        // ì •ë ¬í•˜ê¸°
        function bookSort() {
          let book_copy = [...books];
          book_copy.sort();
          setBooks(book_copy);
        }

        const Modal = (props) => {
          console.log(props);
          console.log(props.index);
          console.log(props.title);
          return (
            <div className="modal">
              <h3>ì œëª© :{props.title}</h3>
              <h4>index :{props.index}</h4>
              <p>ë„ì„œì†Œê°œ</p>
            </div>
          );
        };

        const bookDetail = (event) => {
          console.log(event);
          console.log(event.target);
          setModal(!modal);
        };

        return (
          <>
            <button onClick={bookUpdate}>ì œëª©ìˆ˜ì •</button>
            <button onClick={bookSort}>ì œëª©ì •ë ¬</button>
            {/* ë„ì„œ ëª©ë¡ ì‹œì‘ */}
            <div className="App">
              {books.map((book, i) => (
                <div key={i} className="list">
                  <h3
                    onClick={() => {
                      setModal(!modal);
                      setIndex(i);
                    }}
                  >
                    {book}
                  </h3>
                  <span
                    onClick={() => {
                      let copy = [...like];
                      copy[i] += 1;
                      setLike(copy);
                    }}
                  >
                    ğŸ‘
                  </span>
                  {like[i]}
                  <span
                    onClick={() => {
                      let copy = [...dislike];
                      copy[i] += 1;
                      setDislike(copy);
                    }}
                  >
                    ğŸ‘
                  </span>
                  {dislike[i]}

                  <p>{publishs[i]}</p>
                  <button
                    onClick={() => {
                      let copy = [...books];
                      copy[i] = "ìŠ¤í”„ë§ì˜ ì •ì„";
                      setBooks(copy);
                    }}
                  >
                    ìˆ˜ì •
                  </button>
                  <button
                    onClick={() => {
                      let copy = [...books];
                      copy.splice(i, 1);
                      setBooks(copy);
                    }}
                  >
                    ì‚­ì œ
                  </button>
                </div>
              ))}
              {/* ë„ì„œ ëª©ë¡ ë */}
              <input
                onChange={(event) => {
                  console.log(event.target.value);
                  setUserInput(event.target.value);
                }}
                type="text"
              />
              <button
                onClick={() => {
                  let copy = [...books];
                  let copy_like = [...like];
                  let copy_dislike = [...dislike];
                  copy.unshift(userInput);
                  copy_like.unshift(0);
                  copy_dislike.unshift(0);
                  setBooks(copy);
                  setDislike(copy_dislike);
                  setLike(copy_like);
                }}
              >
                ë“±ë¡
              </button>

              {/*********************** Modal **************************/}
              {modal == true ? (
                <Modal index={index} title={books[index]} />
              ) : null}
            </div>
          </>
        );
      };
      ReactDOM.createRoot(root).render(<App />);
    </script>
  </body>
</html>
